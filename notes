docker buildx build  --platform linux/amd64 -t asia-south1-docker.pkg.dev/whatsapptp/arwhatsapptp:17.3.1 .

docker run --platform linux/amd64 \
    -e DJANGO_ENV=docker \
    -e GOOGLE_APPLICATION_CREDENTIALS="/app/whatsapptp.json" \
    -v /Users/ashish/whatsapptp.json:/app/whatsapptp.json \
    -e SKIP_TWILIO_VALIDATION=true \
    -p 8080:8080 \
    asia-south1-docker.pkg.dev/whatsapptp/arwhatsapptp:17.3.1

docker push us-central1-docker.pkg.dev/marathi-415211/mrhn/tp:17.3.1


docker push asia-south1-docker.pkg.dev/whatsapptp/arwhatsapptp:17.3.1

gcloud auth activate-service-account --key-file=/Users/ashish/whatsapptp.json

gcloud projects add-iam-policy-binding whatsapptp \
    --member="serviceAccount:service-accocunt-whatsapptp@whatsapptp.iam.gserviceaccount.com" \
    --role="roles/artifactregistry.writer"


gcloud run services update tp --image us-central1-docker.pkg.dev/marathi-415211/mrhn/tp:17.3.1 --region us-central1


gcloud services enable secretmanager.googleapis.com --project=whatsapptp
gcloud services enable speech.googleapis.com --project=whatsapptp


gcloud artifacts repositories create arwhatsapptp \
    --repository-format=docker \
    --location=asia-south1 \
    --description="My Docker image repository in Mumbai, India"

gcloud secrets add-iam-policy-binding whatsapp-app-credentials \
    --member="serviceAccount:service-accocunt-whatsapptp@whatsapptp.iam.gserviceaccount.com" \
    --role="roles/secretmanager.secretAccessor" \
    --project=whatsapptp


echo "asia-south1-docker.pkg.dev/$(gcloud config get-value project)/arwhatsapptp"

asia-south1-docker.pkg.dev/whatsapptp/arwhatsapptp




gcloud artifacts repositories create whatsapptp \
    --repository-format=docker \
    --location=LOCATION \
    --description="Repository for storing Docker images"

whatsapptp

gcloud projects add-iam-policy-binding marathi-415211 \
    --member="user:adaclesolutions@gmail.com" \
    --role="roles/artifactregistry.writer"

gcloud artifacts repositories create mrhn \
    --repository-format=docker \
    --location=us-central1 \
    --description="Docker repository in us-central1"



gcloud auth login
gcloud config list account
gcloud config set project marathi-415211

export GOOGLE_APPLICATION_CREDENTIALS="/Users/ashish/mr.json"
export GOOGLE_APPLICATION_CREDENTIALS="/Users/ashish/kw.json"

gcloud secrets create developer-service-account-key   --data-file=/Users/ashish/developer-service-account-key.json

docker commit 14ba2560ecd6b3c10ca6c6094b38221052d5b5e56a5709a98c9042a4ee9f7dcf gcr.io/keywordio-gcp-v2/nelly-gtm-api:6

gcloud secrets create DJANGO_SECRET_KEY \
    --data-file=django_secret_key.txt \
    --replication-policy="automatic"

gcloud secrets list

gcloud projects add-iam-policy-binding marathi-415211 \
  --member="serviceAccount:115539617414-compute@developer.gserviceaccount.com" \
  --role="roles/secretmanager.secretAccessor"


docker run --platform linux/amd64 \
    -e DJANGO_ENV=docker \
    -e GOOGLE_APPLICATION_CREDENTIALS="/app/mr.json" \
    -v /Users/ashish/mr.json:/app/mr.json \
    -p 8080:8080 \
    us-central1-docker.pkg.dev/marathi-415211/mrhn/tp:17.3.1



gcloud run deploy mr \
  --image gcr.io/marathi-415211/mr:0.1 \
  --region us-central1 \
  --allow-unauthenticated \
  --update-env-vars DJANGO_ENV=docker \
  --set-secrets GOOGLE_APPLICATION_CREDENTIALS=developer-service-account-key:/app/credentials.json \
  --service-account 115539617414-compute@developer.gserviceaccount.com


gcloud iam service-accounts list
DISPLAY NAME                        EMAIL                                               DISABLED
App Engine default service account  marathi-415211@appspot.gserviceaccount.com          False
Default compute service account     115539617414-compute@developer.gserviceaccount.com  False


projects/115539617414/secrets/developer-service-account-key


gcloud run deploy mr \
  --image gcr.io/marathi-415211/mr:0.1 \
  --region us-central1 \
  --allow-unauthenticated \
  --update-env-vars DJANGO_ENV=docker \
  --update-secrets GOOGLE_APPLICATION_CREDENTIALS=projects/115539617414/secrets/developer-service-account-key:latest \
  --service-account 115539617414-compute@developer.gserviceaccount.com


gcloud run deploy <SERVICE_NAME> \
  --image=<IMAGE_URL> \
  --platform=managed \
  --region=<REGION> \
  --update-secrets GOOGLE_APPLICATION_CREDENTIALS=<SECRET_NAME>:latest \
  --allow-unauthenticated


gcloud run services describe mr --region=us-central1 --format="json" | grep GOOGLE_APPLICATION_CREDENTIALS

Logs : https://storage.cloud.google.com/marathi_ai_log/daily_transcription_log_20250103.txt

Secret Manager : https://console.cloud.google.com/security/secret-manager?referrer=search&invt=Abl2tQ&project=marathi-415211


Github : https://github.com/adacle/bknewmrai